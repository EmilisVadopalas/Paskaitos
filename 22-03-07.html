<!DOCTYPE html>
<html lang="lt">

<head>
    <title>2022-03-07</title>
</head>

<body>
    <script>
        var students = [{
            name: "Mindaugas",
            grades: [10, 5, 7]
        }, {
            name: "Jonas",
            grades: [10, 5, 7]
        }, {
            name: "Ana",
            grades: [10, 5, 7, 10]
        }, ];

        var studentsMore = [{
            name: "Mindaugas",
            grades: [10, 5, 7]
        }, {
            name: "Jonas",
            grades: [10, 5, 7]
        }, {
            name: "Ana",
            grades: [10, 5, 7, 10]
        }, {
            name: "Ona",
            grades: [10, 5, 7, 10, 9, 10, 9]
        }, ];

        let studentsWithGrades = [{
            name: "Mindaugas",
            subject_grades: [{
                subject_name: "Lietuvių",
                grades: [10, 7, 8]
            }, {
                subject_name: "Matematika",
                grades: [10, 7, 8]
            }, ]
        }, {
            name: "Jonas",
            subject_grades: [{
                subject_name: "Lietuvių",
                grades: [5, 7, 8]
            }, {
                subject_name: "Matematika",
                grades: [8, 7, 8]
            }, ]
        }, ];


        //1. uzduotis (apskaiciuoti vidurki ir isvesti nauja objekta)
        function StudentAveragesObject(students) {

            var avrGradeStudents = [];

            students.forEach(student => {
                var gradesSum = student.grades.reduce((prev, current) => prev + current);
                var avarageGrade = gradesSum / student.grades.length;
                var avgGradeStudent = {
                    name: student.name,
                    avarageGrade: avarageGrade.toFixed(2)
                };
                avrGradeStudents.push(avgGradeStudent);
            });

            return avrGradeStudents;
        }

        //2. uzduotis (apskaiciuoti specifines pamokos vidurkius studentams)
        function StudentAverageSubjectGradeObject(students) {

            var avrSubjectStudents = [];

            students.forEach(student => {

                var Subjects = [];

                student.subject_grades.forEach(sub => {
                    var gradesSum = sub.grades.reduce((prev, current) => prev + current);
                    var avarageGrade = gradesSum / sub.grades.length;

                    let subject = {
                        subject_name: sub.subject_name,
                        avarageGrade: avarageGrade.toFixed(2)
                    };

                    Subjects.push(subject);
                });

                var avrSubjectStudent = {
                    name: student.name,
                    subject_grades: Subjects
                };

                avrSubjectStudents.push(avrSubjectStudent);
            });

            return avrSubjectStudents;
        }

        //3. is 2tros uzduoties masyvo apskaiciuoti bendra vidurki
        function StudentAverageGradeObjectFromStudentsWithSubjects(students) {

            var avrSubjectStudents = [];

            students.forEach(student => {
                var Subjects = [];

                var avarageGrade = 0;

                student.subject_grades.forEach(sub => {
                    var gradesSum = sub.grades.reduce((prev, current) => prev + current);
                    avarageGrade += gradesSum / sub.grades.length;
                });

                var avrSubjectStudent = {
                    name: student.name,
                    avarageGrade: (avarageGrade / student.subject_grades.length).toFixed(2)
                };

                avrSubjectStudents.push(avrSubjectStudent);
            });

            return avrSubjectStudents;
        }


        // find avarage of this array with 3-tyoes of functions
        var arrat = [2, 2, 4, 5, 89, 81, 5, 84, 984, 514, 21, 24, 842, 5814, 5, 54, 854, 584, 54, 5, 46, 4, 85];

        //Tradicine
        function Tradicine(array) {
            return array.reduce((x, y) => x + y) / array.length;
        }

        //anonymous
        var Anonymous = function(array) {
            return array.reduce((x, y) => x + y) / array.length;
        }

        //arrow
        var Arrow = (array) => array.reduce((x, y) => x + y) / array.length;

        console.log(Tradicine(arrat));
        console.log(Anonymous(arrat));
        console.log(Arrow(arrat));

        console.log(StudentAveragesObject(students));
        console.log(StudentAveragesObject(studentsMore));
        console.log(StudentAverageSubjectGradeObject(studentsWithGrades));
        console.log(StudentAverageGradeObjectFromStudentsWithSubjects(studentsWithGrades));
    </script>
</body>

</html>